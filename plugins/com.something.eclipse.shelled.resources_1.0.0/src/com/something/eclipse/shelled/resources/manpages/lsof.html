<HTML>
<BODY>
<PRE>
<!-- Manpage converted by man2html 3.0.1 -->

</PRE>
<H2>SYNOPSIS</H2><PRE>
       <B>lsof</B> [ <B>-?abChlnNOPRstUvVX</B> ] [ <B>-A</B> <I>A</I> ] [ <B>-c</B> <I>c</I> ] [ <B>+|-d</B> <I>d</I> ] [
       <B>+|-D</B> <I>D</I> ] [ <B>+|-f</B> <B>[cfgGn]</B> ] [ <B>-F</B> <I>[f]</I> ] [ <B>-g</B> <I>[s]</I> ] [ <B>-i</B> <I>[i]</I> ]
       [  <B>-k</B> <I>k</I> ] [ <B>+|-L</B> <I>[l]</I> ] [ <B>-m</B> <I>m</I> ] [ <B>+|-M</B> ] [ <B>-o</B> <I>[o]</I> ] [ <B>-p</B> <I>s</I>
       ] [ <B>+|-r</B> <I>[t]</I> ] [ <B>-S</B> <I>[t]</I> ] [ <B>-T</B> <I>[t]</I> ] [ <B>-u</B> <I>s</I> ] [ <B>+|-w</B>  ]  [
       <B>--</B> ] [<I>names</I>]


</PRE>
<H2>DESCRIPTION</H2><PRE>
       <I>Lsof</I> revision 4.66 lists information about files opened by
       processes for the following UNIX dialects:

            AIX 4.3.[23], 5L, and 5.1
            Apple Darwin 1.[2-5], 5.x and 6.x for Power Macintosh systems
            BSDI BSD/OS 4.[13] for x86-based systems
            DEC OSF/1, Digital UNIX, Tru64 UNIX 4.0, and 5.[01]
            FreeBSD 4.[234567] and 5.0 for x86-based systems
            FreeBSD 5.0 for Alpha and Sparc64 based systems
            HP-UX 11.00 and 11.11
            Linux 2.1.72 and above for x86-based systems
            NetBSD 1.[456] for Alpha, x86, and SPARC-based systems
            NEXTSTEP 3.[13] for NEXTSTEP architectures
            OpenBSD 2.[89] and 3.[012] for x86-based systems
            OPENSTEP 4.x
            Caldera OpenUNIX 8
            SCO OpenServer Release 5.0.[46] for x86-based systems
            SCO|Caldera UnixWare 7.1.[13] for x86-based systems
            Solaris 2.6, 7, 8, and 9

       (See the <B>DISTRIBUTION</B> section  of  this  manual  page  for
       information on how to obtain the latest <I>lsof</I> revision.)

       An  open  file may be a regular file, a directory, a block
       special file, a character special file, an executing  text
       reference, a library, a stream or a network file (Internet
       socket, NFS file or UNIX domain socket.)  A specific  file
       or all the files in a file system may be selected by path.

       Instead of a formatted display, <I>lsof</I> will  produce  output
       that  can be parsed by other programs.  See the <B>-F</B>, option
       description, and the <B>OUTPUT</B> <B>FOR</B> <B>OTHER</B> <B>PROGRAMS</B> section for
       more information.

       In  addition  to producing a single output list, <I>lsof</I> will
       run in repeat mode.  In repeat mode it will  produce  out­
       put, delay, then repeat the output operation until stopped
       with an interrupt or quit signal.  See the <B>+|-r</B> <I>[t]</I> option
       description for more information.


</PRE>
<H2>OPTIONS</H2><PRE>
       In  the  absence of any options, <I>lsof</I> lists all open files
       belonging to all active processes.

       an exclusion, it is applied without ORing  or  ANDing  and
       takes  effect  before  any  other  selection  criteria are
       applied.

       The <B>-a</B> option may be used  to  AND  the  selections.   For
       example,  specifying  <B>-a</B>, <B>-U</B>, and <B>-u</B>foo produces a listing
       of only UNIX socket files that belong to  processes  owned
       by user ``foo''.

       Caution:  the  <B>-a</B> option causes all list selection options
       to be ANDed; it can't be used to cause ANDing of  selected
       pairs  of  selection  options  by placing it between them,
       even though its placement there is  acceptable.   Wherever
       <B>-a</B>  is  placed,  it  causes  the  ANDing  of all selection
       options.

       Items of the same selection  set  -  command  names,  file
       descriptors,  network addresses, process identifiers, user
       identifiers - are joined in a single ORed set and  applied
       before the result participates in ANDing.  Thus, for exam­
       ple, specifying <B>-i</B>@aaa.bbb, <B>-i</B>@ccc.ddd, <B>-a</B>, and  <B>-u</B>fff,ggg
       will  select  the  listing  of files that belong to either
       login ``fff'' OR ``ggg'' AND have network  connections  to
       either host aaa.bbb OR ccc.ddd.

       Options  may be grouped together following a single prefix
       -- e.g., the option set ``<B>-a</B> <B>-b</B>  <B>-C</B>''  may  be  stated  as
       <B>-abC</B>.   However, since values are optional following <B>+|-f</B>,
       <B>-F</B>, <B>-g</B>, <B>-i</B>, <B>+|-L</B>, <B>-o</B>, <B>+|-r</B>, <B>-S</B>, and <B>-T</B>, when you  have  no
       values  for  them  be careful that the following character
       isn't ambiguous.  For example, <B>-Fn</B> might represent the  <B>-F</B>
       and  <B>-n</B> options, or it might represent the <B>n</B> field identi­
       fier character following the <B>-F</B> option.  When ambiguity is
       possible,  start a new option with a `-' character - e.g.,
       ``<B>-F</B> <B>-n</B>''.  If the next option is a file name, follow  the
       possibly  ambiguous  option  with  ``--''  - e.g., ``<B>-F</B> <B>--</B>
       <I>name</I>''.

       Either the `+' or the `-' prefix may be applied to a group
       of  options.  Options that don't take on separate meanings
       for each prefix - e.g., <B>-i</B> - may be grouped  under  either
       prefix.   Thus,  for  example,  ``+M -i'' may be stated as
       ``+Mi'' and the group  means  the  same  as  the  separate
       options.   Be  careful of prefix grouping when one or more
       options in the group does take on separate meanings  under
       different  prefixes  - e.g., <B>+|-M</B>; ``-iM'' is not the same
       request as ``-i +M''.  When in doubt, use separate options
       with appropriate prefixes.

       <B>-?</B> <B>-h</B>    These  two  equivalent  options  select  a  usage
                (help) output list.  <I>Lsof</I>  displays  a  shortened
                form  of  this output when it detects an error in
                dynamic modules,  their  symbols,  and  how  they
                affect <I>lsof</I>.

       <B>-b</B>       This option causes <I>lsof</I> to avoid kernel functions
                that might block  -  <B>lstat(2)</B>,  <B>readlink(2)</B>,  and
                <B>stat(2)</B>.

                See  the  <B>BLOCKS</B> <B>AND</B> <B>TIMEOUTS</B> and <B>AVOIDING</B> <B>KERNEL</B>
                <B>BLOCKS</B> sections for  information  on  using  this
                option.

       <B>-c</B> <I>c</I>     This option selects the listing of files for pro­
                cesses executing the command that begins with the
                characters of <I>c</I>.  Multiple commands may be speci­
                fied, using multiple <B>-c</B> options.  They are joined
                in  a single ORed set before participating in AND
                option selection.

                If <I>c</I> begins and ends  with  a  slash  ('/'),  the
                characters  between the slashes is interpreted as
                a regular expression.  Shell  meta-characters  in
                the  regular expression must be quoted to prevent
                their interpretation by the shell.   The  closing
                slash may be followed by these modifiers:

                     b    the regular expression is a basic one.
                     i    ignore the case of letters.
                     x    the regular expression is an extended one
                          (default).

                See the <I>lsof</I> FAQ (The <B>FAQ</B> section gives its loca­
                tion.)   for  more  information  on   basic   and
                extended regular expressions.

                The simple command specification is tested first.
                If that test fails, the command  regular  expres­
                sion is applied.  If the simple command test suc­
                ceeds, the command regular expression test  isn't
                made.   This may result in ``no command found for
                regex:'' messages when lsof's <B>-V</B> option is speci­
                fied.

       <B>-C</B>       This  option  disables  the reporting of any path
                name components from  the  kernel's  name  cache.
                See the <B>KERNEL</B> <B>NAME</B> <B>CACHE</B> section for more infor­
                mation.

       <B>+d</B> <I>s</I>     This option causes <I>lsof</I> to search  for  all  open
                instances of directory <I>s</I> and the files and direc­
                tories it contains at its top level.  This option
                does NOT descend the directory tree, rooted at <I>s</I>,
                nor does it follow symbolic links within it.  The

                The list is an exclusion list if all  entries  of
                the  set begin with '^'.  It is an inclusion list
                if no entry begins with '^'.  Mixed lists are not
                permitted.

                A  file descriptor number range may be in the set
                as long as neither member is empty, both  members
                are numbers, and the ending member is larger than
                the starting one -  e.g.,  ``0-7''  or  ``3-10''.
                Ranges  may  be  specified  for exclusion if they
                have the '^' prefix - e.g., ``^0-7'' excludes all
                file descritors 0 through 7.

                Multiple  file descriptor numbers are joined in a
                single  ORed  set  before  participating  in  AND
                option selection.

                When there are exclusion and inclusion members in
                the set, <I>lsof</I> reports them as  errors  and  exits
                with a non-zero return code.

                See  the description of File Descriptor (FD) out­
                put values in the <B>OUTPUT</B> section for more  infor­
                mation on file descriptor names.

       <B>+D</B> <I>D</I>     This  option  causes  <I>lsof</I> to search for all open
                instances of directory <I>D</I> and all  the  files  and
                directories  it  contains  to its complete depth.
                Symbolic links within directory <I>D</I> are  ignored  -
                i.e, not followed.

                Note:  the  authority  of the user of this option
                limits it to searching for files  that  the  user
                has permission to examine with the system <B>stat(2)</B>
                function.

                Further note: <I>lsof</I> may process this option slowly
                and  require  a large amount of dynamic memory to
                do it.  This  is  because  it  must  descend  the
                entire  directory  tree,  rooted  at  <I>D</I>,  calling
                <B>stat(2)</B> for each file and directory,  building  a
                list  of  all  the  files it finds, and searching
                that list for a match with every open file.  When
                directory <I>D</I> is large, these steps can take a long
                time, so use this option prudently.

       <B>-D</B> <I>D</I>     This option directs  <I>lsof's</I>  use  of  the  device
                cache  file.  The use of this option is sometimes
                restricted.  See the <B>DEVICE</B>  <B>CACHE</B>  <B>FILE</B>  section
                and the sections that follow it for more informa­
                tion on this option.
                tions are restricted, they will not appear in the
                description of the <B>-D</B> option that accompanies  <B>-h</B>
                or  <B>-?</B>  option output.  See the <B>DEVICE</B> <B>CACHE</B> <B>FILE</B>
                section and the sections that follow it for  more
                information  on  these functions and when they're
                restricted.

                The <B>?</B>  function reports the read-only  and  write
                paths  that  lsof  can  use  for the device cache
                file, the  names  of  any  environment  variables
                whose  values  <I>lsof</I> will examine when forming the
                device cache file path, and the  format  for  the
                personal device cache file path.  (Escape the `?'
                character as your shell requires.)

                When available, the <B>b</B>, <B>r</B>, and <B>u</B> functions may  be
                followed  by  the  device cache file's path.  The
                standard default is <I>.lsof</I><B>_</B><I>hostname</I>  in  the  home
                directory of the real user ID that executes <I>lsof</I>,
                but this could have been changed  when  <I>lsof</I>  was
                configured  and  compiled.  (The output of the <B>-h</B>
                and <B>-?</B>  options show the current default prefix -
                e.g.,  ``.lsof''.)   The suffix, <I>hostname</I>, is the
                first component of the host's  name  returned  by
                <B>gethostname(2)</B><I>.</I>

                When  available,  the  <B>b</B> function directs <I>lsof</I> to
                build a new device cache file at the  default  or
                specified path.

                The <B>i</B> function directs <I>lsof</I> to ignore the default
                device cache  file  and  obtain  its  information
                about devices via direct calls to the kernel.

                The  <B>r</B>  function  directs <I>lsof</I> to read the device
                cache at the default or specified path, but  pre­
                vents  it  from  creating a new device cache file
                when none exists or the existing one  is  improp­
                erly  structured.  The <B>r</B> function, when specified
                without a path name, prevents <I>lsof</I> from  updating
                an  incorrect  or  outdated device cache file, or
                creating a new one in its place.  The <B>r</B>  function
                is  always available when it is specified without
                a path name argument; it may be restricted by the
                permissions of the <I>lsof</I> process.

                When  available,  the  <B>u</B> function directs <I>lsof</I> to
                read the device cache  file  at  the  default  or
                specified  path,  if possible, and to rebuild it,
                if necessary.  This is the default  device  cache
                file  function  when no <B>-D</B> option has been speci­
                fied.
                ments will be taken to be file system names,  and
                <I>lsof</I>  will  complain if any are not.  This can be
                useful, for example, when the  file  system  name
                (mounted-on  device)  isn't a block device.  This
                happens for some CD-ROM file systems.

                When <B>-f</B> is specified,  all  path  name  arguments
                will  be  taken  to  be  simple files.  Thus, for
                example, the ``<B>-f</B> /'' arguments  direct  lsof  to
                search  for  open files with a `/' path name, not
                all open files in the `/' (root) file system.

                Be careful to make sure <B>+f</B> is properly terminated
                and  isn't  followed by a character (e.g., of the
                file or file system name) that might be taken  as
                a parameter.  For example, use ``--'' after <B>+f</B> as
                in this example.

                     $ lsof +f -- /file/system/name

                The  listing  of  information  from  kernel  file
                structures,  requested with the <B>+f</B> <B>[cfgGn]</B> option
                form, is normally inhibited, and is not available
                for  some  dialects  -  e.g.,  /proc-based Linux.
                When the prefix to <B>f</B> is a plus sign (`+'),  these
                characters request file structure information:

                     <B>c</B>    file structure use count
                     <B>f</B>    file structure address
                     <B>g</B>    file flag abbreviations
                     <B>G</B>    file flags in hexadecimal
                     <B>n</B>    file structure node address

                When  the  prefix is minus (`-') the same charac­
                ters disable the listing of the indicated values.

                File  structure addresses, use counts, flags, and
                node addresses may be used to detect more readily
                identical  files inherited by child processes and
                identical files in use  by  different  processes.
                <I>Lsof</I>  column  output  can  be  sorted  by  output
                columns holding the values and listed to identify
                identical  file  use, or <I>lsof</I> field output can be
                parsed by an AWK or Perl post-filter  script,  or
                by a C program.

       <B>-F</B> <I>f</I>     This  option  specifies a character list, <I>f</I>, that
                selects the fields to be output for processing by
                another  program,  and  the character that termi­
                nates each output field.  Each field to be output
                is  specified  with a single character in <I>f</I>.  The
                field terminator  defaults  to  NL,  but  may  be
                used.

                Other combinations of fields and their associated
                field  terminator  character  must  be  set  with
                explicit entries in <I>f</I>, as described in the <B>OUTPUT</B>
                <B>FOR</B> <B>OTHER</B> <B>PROGRAMS</B> section.

                When a field selection  character  identifies  an
                item  <I>lsof</I>  does  not normally list - e.g., PPID,
                selected with <B>-R</B> -  specification  of  the  field
                character  -  e.g.,  ``<B>-FR</B>''  -  also selects the
                listing of the item.

                When the field selection character list  contains
                the  single  character  `?',  <I>lsof</I> will display a
                help list of the field identification characters.
                (Escape   the   `?'   character   as  your  shell
                requires.)

       <B>-g</B> <I>[s]</I>   This option selects the listing of files for  the
                processes  whose optional process group IDentifi­
                cation (PGID) numbers are in the  comma-separated
                set  <I>s</I>  -  e.g.,  ``123'' or ``123,456''.  (There
                should be no spaces in the set.)

                Multiple PGID numbers are joined in a single ORed
                set before participating in AND option selection.

                The <B>-g</B> option also enables the output display  of
                PGID  numbers.  When specified without a PGID set
                that's all it does.

       <B>-i</B> <I>[i]</I>   This option selects the listing of files  any  of
                whose Internet address matches the address speci­
                fied in <I>i</I>.  If  no  address  is  specified,  this
                option  selects  the  listing of all Internet and
                x.25 (HP-UX) network files.

                If <B>-i</B><I>4</I> or <B>-i</B><I>6</I>  is  specified  with  no  following
                address,  only files of the indicated IP version,
                IPv4 or IPv6, are displayed.  (An IPv6 specifica­
                tion  may  be  used only if the dialects supports
                IPv6, as indicated by ``[46]'' and ``IPv[46]'' in
                <I>lsof's</I>  <B>-h</B> or <B>-?</B>  output.)  Sequentially specify­
                ing <B>-i</B>4, followed by <B>-i</B>6 is the same as  specify­
                ing  <B>-i</B>,  and vice-versa.  Specifying <B>-i</B>4, or <B>-i</B>6
                after <B>-i</B> is the same as specifying <B>-i</B>4 or <B>-i</B>6  by
                itself.

                Multiple  addresses (up to a limit of 100) may be
                specified with multiple <B>-i</B> options.  (A port num­
                ber  or  service  name  range  is  counted as one
                          applies to all IP versions.
                     <I>protocol</I> is a protocol name - <B>TCP</B> or <B>UDP</B>.
                     <I>hostname</I> is an Internet host name.  Unless a
                          specific IP version is specified, open
                          network files associated with host names
                          of all versions will be selected.
                     <I>hostaddr</I> is a numeric Internet IPv4 address in
                          dot form; or an IPv6 numeric address in
                          colon form, enclosed in brackets, if the
                          UNIX dialect supports IPv6.  When an IP
                          version is selected, only its numeric
                          addresses may be specified.
                     <I>service</I> is an <I>/etc/services</I> name - e.g., <B>smtp</B> -
                          or a list of them.
                     <I>port</I> is a port number, or a list of them.

                IPv6 options may be used only if the UNIX dialect
                supports IPv6.  To see if  the  dialect  supports
                IPv6,  run  <I>lsof</I> and specify the <B>-h</B> or <B>-?</B>  (help)
                option.  If the displayed description of  the  <B>-i</B>
                option contains ``[46]'' and ``IPv[46]'', IPv6 is
                supported.

                IPv4 host names and addresses may not  be  speci­
                fied if network file selection is limited to IPv6
                with <B>-i</B> 6.  IPv6 host names and addresses may not
                be specified if network file selection is limited
                to IPv4 with <B>-i</B> 4.  When  an  open  IPv4  network
                file's  address is mapped in an IPv6 address, the
                open file's type will be IPv6, not IPv4, and  its
                display will be selected by '6', not '4'.

                At  least one address component - <B>4,</B> <B>6,</B> <I>protocol</I>,
                ,IR hostname , <I>hostaddr</I>, or  <I>service</I>  -  must  be
                supplied.   The  `@'  character, leading the host
                specification, is always required; as is the `:',
                leading  the  port specification.  Specify either
                <I>hostname</I> or  <I>hostaddr</I>.   Specify  either  <I>service</I>
                name list or <I>port</I> number list.  If a <I>service</I> name
                list is specified, the <I>protocol</I> may also need  to
                be  specified if the TCP and UDP port numbers for
                the service name are different.  Use any  case  -
                lower or upper - for <I>protocol</I>.

                <I>Service</I> names and <I>port</I> numbers may be combined in
                a list whose entries are separated by commas  and
                whose  numeric  range  entries  are  separated by
                minus signs.  There may be  no  embedded  spaces,
                and  all  service names must belong to the speci­
                fied <I>protocol</I>.  Since service names  may  contain
                embedded  minus  signs,  the  staring  entry of a
                range can't be a service name; it can be  a  port
                          <I>nameserver</I>, host bar
                     :time - either TCP or UDP time service port

       <B>-k</B> <I>k</I>     This option specifies a kernel name list file, <I>k</I>,
                in place of /vmunix, /mach, etc.  This option  is
                not  available  under  AIX on the IBM RISC/System
                6000.

       <B>-l</B>       This option inhibits the conversion  of  user  ID
                numbers  to  login names.  It is also useful when
                login  name  lookup  is  working  improperly   or
                slowly.

       <B>+|-L</B> <I>[l]</I> This  option  enables (`+') or disables (`-') the
                listing of  file  link  counts,  where  they  are
                available - e.g., they aren't available for sock­
                ets, or most FIFOs and pipes.

                When <B>+L</B> is specified without a following  number,
                all link counts will be listed.  When <B>-L</B> is spec­
                ified (the  default),  no  link  counts  will  be
                listed.

                When  <B>+L</B> is followed by a number, only files hav­
                ing a link count less than that  number  will  be
                listed.  (No number may follow <B>-L</B>.)  A specifica­
                tion of the form ``<B>+L1</B>'' will select  open  files
                that  have been unlinked.  A specification of the
                form ``<B>+aL1</B> <I>&lt;file</I><B>_</B><I>system&gt;</I>'' will select  unlinked
                open files on the specified file system.

                For  other link count comparisons, use field out­
                put (<B>-F</B>) and a post-processing script or program.

       <B>-m</B> <I>m</I>     This option specifies a kernel memory file, <I>c</I>, in
                place of <I>/dev/kmem</I> or <I>/dev/mem</I> -  e.g.,  a  crash
                dump file.

       <B>+|-M</B>     Enables  (<B>+</B>)  or  disables  (<B>-</B>)  the reporting of
                portmapper registrations for local  TCP  and  UDP
                ports.   The default reporting mode is set by the
                <I>lsof</I> builder with the HASPMAPENABLED  #define  in
                the dialect's machine.h header file; <I>lsof</I> is dis­
                tributed with the HASPMAPENABLED #define  deacti­
                vated,  so  portmapper  reporting  is disabled by
                default and must be requested with <B>+M</B>.   Specify­
                ing  <I>lsof's</I>  <B>-h</B>  or  <B>-?</B>   option  will report the
                default mode.  Disabling portmapper  registration
                when  it  is already disabled or enabling it when
                already enabled is acceptable.  in a warning.

                When   portmapper   registration   reporting   is
                tration reporting is slowing or blocking <I>lsof</I>.

                For purposes of portmapper registration reporting
                <I>lsof</I> considers a TCP or UDP port local if: it  is
                found  in the local part of its containing kernel
                structure; or if it is  located  in  the  foreign
                part  of  its containing kernel structure and the
                local and  foreign  Internet  addresses  are  the
                same;  or if it is located in the foreign part of
                its containing kernel structure and  the  foreign
                Internet  address is INADDR_LOOPBACK (127.0.0.1).
                This rule may make <I>lsof</I> ignore some foreign ports
                on  machines  with  multiple  interfaces when the
                foreign Internet address is on a different inter­
                face from the local one.

                See the <I>lsof</I> FAQ (The <B>FAQ</B> section gives its loca­
                tion.)  for further discussion of portmapper reg­
                istration reporting issues.

       <B>-n</B>       This  option  inhibits  the conversion of network
                numbers  to  host  names   for   network   files.
                Inhibiting  conversion  may make <I>lsof</I> run faster.
                It is also useful when host name  lookup  is  not
                working properly.

       <B>-N</B>       This option selects the listing of NFS files.

       <B>-o</B>       This  option  directs <I>lsof</I> to display file offset
                at all times.  It causes the SIZE/OFF output col­
                umn title to be changed to OFFSET.  Note: on some
                UNIX dialects <I>lsof</I> can't obtain accurate or  con­
                sistent  file  offset information from its kernel
                data sources, sometimes just for particular kinds
                of  files (e.g., socket files.)  Consult the <I>lsof</I>
                FAQ (The <B>FAQ</B> section gives  its  location.)   for
                more information.

                The  <B>-o</B>  and  <B>-s</B>  options are mutually exclusive;
                they can't both be specified.   When  neither  is
                specified, <I>lsof</I> displays whatever value - size or
                offset - is appropriate  and  available  for  the
                type of the file.

       <B>-o</B> <I>o</I>     This  option defines the number of decimal digits
                (<I>o</I>) to be printed after the  ``0t''  for  a  file
                offset  before the form is switched to ``0x...''.
                An <I>o</I> value of zero (unlimited)  directs  <I>lsof</I>  to
                use the ``0t'' form for all offset output.

                This  option does NOT direct <I>lsof</I> to display off­
                set at all times; specify <B>-o</B> (without a  trailing
                determine the default that is in effect.

       <B>-O</B>       This  option  directs <I>lsof</I> to bypass the strategy
                it uses to avoid being  blocked  by  some  kernel
                operations  -  i.e.,  doing  them in forked child
                processes.   See  the  <B>BLOCKS</B>  <B>AND</B>  <B>TIMEOUTS</B>  and
                <B>AVOIDING</B> <B>KERNEL</B> <B>BLOCKS</B> sections for more informa­
                tion on kernel operations that may block <I>lsof</I>.

                While use of this option will reduce <I>lsof</I> startup
                overhead, it may also cause <I>lsof</I> to hang when the
                kernel doesn't respond to a function.   Use  this
                option cautiously.

       <B>-p</B> <I>s</I>     This  option selects the listing of files for the
                processes whose ID numbers are in the comma-sepa­
                rated  set  <I>s</I>  -  e.g.,  ``123''  or ``123,456''.
                (There should be no spaces in the set.)

                Multiple process ID numbers are joined in a  sin­
                gle  ORed  set before participating in AND option
                selection.

       <B>-P</B>       This option inhibits the conversion of port  num­
                bers to port names for network files.  Inhibiting
                the conversion may make <I>lsof</I> run a little faster.
                It  is  also  useful when host name lookup is not
                working properly.

       <B>+|-r</B> <I>[t]</I> This option puts <I>lsof</I> in repeat mode.  There <I>lsof</I>
                lists  open  files  as selected by other options,
                delays <I>t</I> seconds (default fifteen), then  repeats
                the  listing,  delaying  and listing repetitively
                until stopped by a condition defined by the  pre­
                fix to the option.

                If  the  prefix is a `-', repeat mode is endless.
                <I>Lsof</I> must be terminated with an interrupt or quit
                signal.

                If  the  prefix  is `+', repeat mode will end the
                first cycle no open files are  listed  -  and  of
                course  when <I>lsof</I> is stopped with an interrupt or
                quit signal.  When repeat mode  ends  because  no
                files  are  listed, the process exit code will be
                zero if any open files were ever listed; one,  if
                none were ever listed.

                <I>Lsof</I> marks the end of each listing: if field out­
                put is in progress (the <B>-F</B>, option has been spec­
                ified),  the  marker is `m'; otherwise the marker
                is ``========''.  The marker is followed by a  NL
                Repeat  mode  is  useful  when coupled with field
                output (see the <B>-F</B>,  option  description)  and  a
                supervising <I>awk</I> or <I>Perl</I> script, or a C program.

       <B>-R</B>       This  option directs lsof to list the Parent Pro­
                cess IDentification number in the PPID column.

       <B>-s</B>       This option directs <I>lsof</I> to display file size  at
                all  times.  It causes the SIZE/OFF output column
                title to be changed to SIZE.  If  the  file  does
                not have a size, nothing is displayed.

                The  <B>-o</B> (without a following decimal digit count)
                and <B>-s</B> options are mutually exclusive; they can't
                both  be  specified.   When neither is specified,
                <I>lsof</I> displays whatever value - size or  offset  -
                is  appropriate  and  available  for  the type of
                file.

                Since some types of files don't have true sizes -
                sockets,  FIFOs,  pipes, etc. - lsof displays for
                their sizes the content amounts in their  associ­
                ated kernel buffers, if possible.

       <B>-S</B> <I>[t]</I>   This  option  specifies an optional time-out sec­
                onds value for kernel functions - <B>lstat(2)</B>, <I>read­</I>
                <B>link(2)</B>, and <B>stat(2)</B> - that might otherwise dead­
                lock.  The minimum for <I>t</I>  is  two;  the  default,
                fifteen;  when no value is specified, the default
                is used.

                See the <B>BLOCKS</B>  <B>AND</B>  <B>TIMEOUTS</B>  section  for  more
                information.

       <B>-T</B> <I>[t]</I>   This   option  controls  the  reporting  of  some
                TCP/TPI information, also reported by <B>netstat(1)</B>,
                following  the network addresses.  In normal out­
                put the information appears in parentheses,  each
                item  except  state identified by a keyword, fol­
                lowed by `=', separated from others by  a  single
                space:

                     &lt;TCP or TPI state name&gt;
                     QR=&lt;read queue length&gt;
                     QS=&lt;send queue length&gt;
                     WR=&lt;window read length&gt;  (not all dialects)
                     WW=&lt;window write length&gt; (not all dialects)

                When the field output mode is in effect (See <B>OUT­</B>
                <B>PUT</B> <B>FOR</B> <B>OTHER</B> <B>PROGRAMS</B>.)  each item appears as  a
                field  with  a `T' leading character, and the TCP
                or TPI state name has the prefix ``ST=''.
                size reporting can be requested.

                When <B>-T</B> is used to select information - i.e.,  it
                is followed by one or more selection characters -
                the displaying of state is disabled  by  default,
                and  it  must be explicitly selected again in the
                characters following <B>-T</B>.  (In effect,  then,  the
                default  is  equivalent to <B>-Ts</B>.)  For example, if
                queue lengths and state are desired, use <B>-Tqs</B>.

       <B>-t</B>       This option specifies that  <I>lsof</I>  should  produce
                terse output with process identifiers only and no
                header - e.g., so that the output may be piped to
                <B>kill(1)</B>.  This option selects the <B>-w</B> option.

       <B>-u</B> <I>s</I>     This  option selects the listing of files for the
                user whose login names or user ID numbers are  in
                the  comma-separated  set  <I>s</I>  - e.g., ``abe'', or
                ``548,root''.  (There should be no spaces in  the
                set.)

                Multiple  login  names  or  user  ID  numbers are
                joined in a single ORed set before  participating
                in AND option selection.

                If  a login name or user ID is preceded by a `^',
                it becomes a negation - i.e., files of  processes
                owned  by the login name or user ID will never be
                listed.  A negated login name or user  ID  selec­
                tion  is neither ANDed nor ORed with other selec­
                tions; it is applied before all other  selections
                and  absolutely excludes the listing of the files
                of the process.  For example, to direct  <I>lsof</I>  to
                exclude  the  listing  of files belonging to root
                processes, specify ``-u^root'' or ``-u^0''.

       <B>-U</B>       This option selects the listing  of  UNIX  domain
                socket files.

       <B>-v</B>       This  option  selects the listing of <I>lsof</I> version
                information, including: revision number; when the
                <I>lsof</I>  binary was constructed; who constructed the
                binary and where; the name of the  compiler  used
                to  construct the <I>lsof</I> <I>binary;</I> the version number
                of the compiler when readily available; the  com­
                piler and loader flags used to construct the <I>lsof</I>
                binary; and  system  information,  typically  the
                output of <I>uname</I>'s <B>-a</B> option.

       <B>-V</B>       This option directs <I>lsof</I> to indicate the items it
                was asked to list and failed to  find  -  command
                names,  file  names, Internet addresses or files,
                RITY are defined at compile time and they prevent
                the listing of open files.

       <B>+|-w</B>     Enables  (<B>+</B>)  or  disables (<B>-</B>) the suppression of
                warning messages.

                The <I>lsof</I> builder may choose to have warning  mes­
                sages   disabled  or  enabled  by  default.   The
                default warning message state is indicated in the
                output  of the <B>-h</B> or <B>-?</B>  option.  Disabling warn­
                ing messages when they are  already  disabled  or
                enabling them when already enabled is acceptable.

                The <B>-t</B> option selects the <B>-w</B> option.

       <B>-X</B>       This is a dialect-specific option.

           AIX:
                <B>WARNING:</B> use of this option on a busy AIX  system
                might  cause  an  application  process to hang so
                completely that it  can  neither  be  killed  nor
                stopped.   I have never seen this happen or had a
                report of it, but I think the possibility exists.

                This  IBM  AIX RISC/System 6000 <B>-X</B> option directs
                <I>lsof</I> to use the  kernel  readx()  function.   (By
                default  use  of readx() is disabled.)  On AIX 5L
                and above <I>lsof</I> may need setuid-root permission to
                perform the actions this option requests.

                The  <I>lsof</I>  builder may specify that the <B>-X</B> option
                be restricted to  processes  whose  real  UID  is
                root.   If that has been done, the <B>-X</B> option will
                not appear in the <B>-h</B> or <B>-?</B>   help  output  unless
                the  real  UID  of the <I>lsof</I> process is root.  The
                default <I>lsof</I> distribution allows any UID to spec­
                ify  <B>-X,</B> so by default it will appear in the help
                output.

                When AIX readx() use is disabled, <I>lsof</I> may not be
                able  to  report  information  for  all  text and
                loader file references, but  it  may  also  avoid
                exacerbating  an AIX kernel directory search ker­
                nel error, known as the Stale Segment ID bug.

                When readx() is enabled,  <I>lsof</I>  will  attempt  to
                report  information  on  the text file being exe­
                cuted by each process and the shared libraries it
                uses.

                The  readx()  function, used by <I>lsof</I> or any other
                program, to access some sections of  kernel  vir­
                for defining readx() use when compiling <I>lsof</I>.

       <B>--</B>       The  double  minus  sign  option is a marker that
                signals the end of the keyed options.  It may  be
                used,  for  example,  when  the  first  file name
                begins with a minus sign.  It may  also  be  used
                when  the  absence  of a value for the last keyed
                option must be signified by  the  presence  of  a
                minus sign in the following option and before the
                start of the file names.

       <I>names</I>    These are path names of specific files  to  list.
                Symbolic  links  are  resolved  before  use.  The
                first name may be separated  from  the  preceding
                options with the ``--'' option.

                If  a  <I>name</I> is the mounted-on directory of a file
                system or the device of  the  file  system,  <I>lsof</I>
                will  list all the files open on the file system.
                To be considered a file  system,  the  <I>name</I>  must
                match  a  mounted-on  directory  name in <B>mount(8)</B>
                output, or match the name of a block device asso­
                ciated  with  a  mounted-on  directory name.  The
                <B>+|-f</B> option may be used to force <I>lsof</I> to consider
                a  <I>name</I> a file system identifier (<B>+f</B>) or a simple
                file (<B>-f</B>).

                If <I>name</I> is a path to a directory that is not  the
                mounted-on directory name of a file system, it is
                treated just as a regular file is treated - i.e.,
                its  listing is restricted to processes that have
                it open as a file or as a process-specific direc­
                tory,  such as the root or current working direc­
                tory.  To request that <I>lsof</I> look for  open  files
                inside  a  directory  name, use the <B>+d</B> <I>s</I> and <B>+D</B> <I>D</I>
                options.

                If a <I>name</I> is the base name of a family of  multi­
                plexed  files  -  e.  g, AIX's <I>/dev/pt[cs]</I> - <I>lsof</I>
                will list all the associated multipled  files  on
                the  device  that are open - e.g., <I>/dev/pt[cs]/1</I>,
                <I>/dev/pt[cs]/2</I>, etc.

                If a <I>name</I> is a UNIX domain socket name, <I>lsof</I> will
                search for it by the characters of the name alone
                - exactly as it is specified and is  recorded  in
                the  kernel socket structure.  Specifying a rela­
                tive path - e.g., <I>./file</I> - in place of the file's
                absolute  path  -  e.g.,  <I>/tmp/file</I>  - won't work
                because <I>lsof</I> must match the characters you  spec­
                ify  with what it finds in the kernel UNIX domain
                socket structures.


</PRE>
<H2>AFS</H2><PRE>
       <I>Lsof</I>  supports  the  recognition  of  AFS  files for these
       dialects (and AFS versions):

            AIX 4.1.4 (AFS 3.4a)
            HP-UX 9.0.5 (AFS 3.4a)
            Linux 1.2.13 (AFS 3.3)
            Solaris 2.[56] (AFS 3.4a)

       It may recognize AFS files  on  other  versions  of  these
       dialects, but has not been tested there.  Depending on how
       AFS is implemented, <I>lsof</I> may recognize AFS files in  other
       dialects,  or  may have difficulties recognizing AFS files
       in the supported dialects.

       <I>Lsof</I> may have trouble identifying all aspects of AFS files
       in  supported  dialects  when AFS kernel support is imple­
       mented via dynamic modules whose addresses do  not  appear
       in  the  kernel's  variable name list.  In that case, <I>lsof</I>
       may have to guess at the identity of AFS files, and  might
       not  be  able to obtain volume information from the kernel
       that is needed for calculating AFS  volume  node  numbers.
       When  <I>lsof</I>  can't  compute volume node numbers, it reports
       blank in the NODE column.

       The <B>-A</B> <I>A</I> option is available in some  dialect  implementa­
       tions  of  <I>lsof</I>  for  specifying  the name list file where
       dynamic module kernel addresses may be found.   When  this
       option  is  available,  it will be listed in the <I>lsof</I> help
       output, presented in response to the <B>-h</B> or <B>-?</B>

       See the <I>lsof</I> FAQ (The <B>FAQ</B>  section  gives  its  location.)
       for more information about dynamic modules, their symbols,
       and how they affect <I>lsof</I> options.

       Because AFS path lookups don't seem to participate in  the
       kernel's  name  cache operations, <I>lsof</I> can't identify path
       name components for AFS files.


</PRE>
<H2>SECURITY</H2><PRE>
       <I>Lsof</I> has three features that may cause security  concerns.
       First,  its default compilation mode allows anyone to list
       all open files with it.  Second, by default it  creates  a
       user-readable  and  user-writable device cache file in the
       home directory of the real user  ID  that  executes  <I>lsof</I>.
       (The  list-all-open-files and device cache features may be
       disabled when <I>lsof</I> is compiled.)  Third,  its  <B>-k</B>  and  <B>-m</B>
       options name alternate kernel name list or memory files.

       Restricting the listing of all open files is controlled by
       the   compile-time   HASSECURITY   and   HASNOSOCKSECURITY
       option, gives the status of the HASSECURITY and HASNOSOCK­
       SECURITY definitions.

       See the <B>Security</B> section of the <I>0README</I> file of  the  <I>lsof</I>
       distribution  for  information  on  building <I>lsof</I> with the
       HASSECURITY and HASNOSOCKSECURITY options enabled.

       Creation and use  of  a  user-readable  and  user-writable
       device  cache file is controlled by the compile-time HASD­
       CACHE option.  See the <B>DEVICE</B> <B>CACHE</B> <B>FILE</B> section  and  the
       sections  that  follow  it  for details on how its path is
       formed.  For security considerations it  is  important  to
       note  that  in  the default <I>lsof</I> distribution, if the real
       user ID under which <I>lsof</I> is executed is root,  the  device
       cache  file  will  be  written  in root's home directory -
       e.g., <I>/</I> or <I>/root</I>.  When HASDCACHE  is  not  defined,  <I>lsof</I>
       does not write or attempt to read a device cache file.

       When HASDCACHE is defined, the <I>lsof</I> help output, presented
       in response to the <B>-h</B>, <B>-D?</B>, or <B>-?</B>  options,  will  provide
       device cache file handling information.  When HASDCACHE is
       not defined, the <B>-h</B> or <B>-?</B>  output will have no  <B>-D</B>  option
       description.

       Before you decide to disable the device cache file feature
       - enabling it improves the performance of <I>lsof</I> by reducing
       the  startup  overhead  of examining all the nodes in <I>/dev</I>
       (or <I>/devices</I>) - read the discussion of it in the  <I>00DCACHE</I>
       file  of  the  <I>lsof</I> distribution and the <I>lsof</I> FAQ (The <B>FAQ</B>
       section gives its location.)

       WHEN IN DOUBT, YOU CAN TEMPORARILY DISABLE THE USE OF  THE
       DEVICE CACHE FILE WITH THE <B>-Di</B> OPTION.

       When <I>lsof</I> user declares alternate kernel name list or mem­
       ory files with the <B>-k</B> and  <B>-m</B>  options,  <I>lsof</I>  checks  the
       user's  authority  to  read  them with <B>access(2)</B>.  This is
       intended to prevent whatever special  power  <I>lsof's</I>  modes
       might confer on it from letting it read files not normally
       accessible via the authority of the real user ID.


</PRE>
<H2>OUTPUT</H2><PRE>
       This section describes the information <I>lsof</I> lists for each
       open  file.  See the <B>OUTPUT</B> <B>FOR</B> <B>OTHER</B> <B>PROGRAMS</B> section for
       additional information on output that can be processed  by
       another program.

       <I>Lsof</I>  only  outputs  printable (declared so by <B>isprint(3)</B>)
       ASCII characters.  Non-printable characters are printed in
       one  of  three forms: the C ``\[bfrnt]'' form; the control
       character `^' form (e.g., ``^@''); or hexadecimal  leading
       ``\x''  form  (e.g., ``\xab'').  Space is non-printable in
                  is specified.  See the <B>OUTPUT</B>  <B>FOR</B>  <B>OTHER</B>  <B>COM­</B>
                  <B>MANDS</B>  section  for  information  on  selecting
                  field output and the  associated  command  name
                  descriptor.

       PID        is  the  Process  IDentification  number of the
                  process.

       PPID       is the Parent Process IDentification number  of
                  the  process.  It is only displayed when the <B>-R</B>
                  option has been specified.

       PGID       is  the  process  group  IDentification  number
                  associated  with  the process.  It is only dis­
                  played when the <B>-g</B> option has been specified.

       USER       is the user ID number or login name of the user
                  to  whom  the process belongs, usually the same
                  as reported by <B>ps(1)</B>.  However, on  Linux  USER
                  is  the  user  ID number or login that owns the
                  directory in /proc where <I>lsof</I> finds information
                  about  the  process.   Usually that is the same
                  value reported by <B>ps(1)</B>, but  may  differ  when
                  the  process has changed its effective user ID.
                  (See the <B>-l</B> option description for  information
                  on  when a user ID number or login name is dis­
                  played.)

       FD         is the File Descriptor number of the file or:

                       <B>cwd</B>  current working directory;
                       <B>L</B><I>nn</I>  library references (AIX);
                       <B>jld</B>  jail directory (FreeBSD);
                       <B>ltx</B>  shared library text (code and data);
                       <B>Mxx</B>  hex memory-mapped type number xx.
                       <B>m86</B>  DOS Merge mapped file;
                       <B>mem</B>  memory-mapped file;
                       <B>mmap</B> memory-mapped device;
                       <B>pd</B>   parent directory;
                       <B>rtd</B>  root directory;
                       <B>tr</B>   kernel trace file (OpenBSD);
                       <B>txt</B>  program text (code and data);
                       <B>v86</B>  VP/ix mapped file;

                  FD is followed  by  one  of  these  characters,
                  describing  the  mode  under  which the file is
                  open:

                       <B>r</B> for read access;
                       <B>w</B> for write access;
                       <B>u</B> for read and write access;
                       space if mode unknown and no lock
                       <B>U</B> for a lock of unknown type;
                       <B>x</B> for an SCO OpenServer Xenix lock on part
                       of the file;
                       <B>X</B> for an SCO OpenServer Xenix lock on  the
                       entire file;
                       space if there is no lock.

                  See  the  <B>LOCKS</B> section for more information on
                  the lock information character.

                  The FD column  contents  constitutes  a  single
                  field for parsing in post-processing scripts.

       TYPE       is  the  type  of  the node associated with the
                  file - e.g., GDIR, GREG, VDIR, VREG, etc.

                  or ``IPv4'' for an IPv4 socket;

                  or ``IPv6'' for an open  IPv6  network  file  -
                  even  if its address is IPv4, mapped in an IPv6
                  address;

                  or ``ax25'' for a Linux AX.25 socket;

                  or ``inet'' for an Internet domain socket;

                  or ``lla'' for a HP-UX link level access file;

                  or ``rte'' for an AF_ROUTE socket;

                  or ``sock'' for a socket of unknown domain;

                  or ``unix'' for a UNIX domain socket;

                  or ``x.25'' for an HP-UX x.25 socket;

                  or ``BLK'' for a block special file;

                  or ``CHR'' for a character special file;

                  or ``DEL'' for a Linux map file that  has  been
                  deleted;

                  or ``DIR'' for a directory;

                  or ``DOOR'' for a VDOOR file;

                  or ``FIFO'' for a FIFO special file;

                  or ``LINK'' for a symbolic link file;

                  or ``MPB'' for a multiplexed block file;
                  tory;

                  or ``PDIR'' for a <I>/proc</I> directory;

                  or  ``PETY''  for  a  <I>/proc</I>   executable   type
                  (<I>etype</I>);

                  or ``PFD'' for a <I>/proc</I> file descriptor;

                  or  ``PFDR'' for a <I>/proc</I> file descriptor direc­
                  tory;

                  or ``PFIL'' for an executable <I>/proc</I> file;

                  or ``PFPR'' for a <I>/proc</I> FP register set;

                  or ``PGD'' for a <I>/proc/pagedata</I> file;

                  or ``PGID'' for a <I>/proc</I> group notifier file;

                  or ``PIPE'' for pipes;

                  or ``PLC'' for a <I>/proc/lwpctl</I> file;

                  or ``PLDR'' for a <I>/proc/lpw</I> directory;

                  or ``PLDT'' for a <I>/proc/ldt</I> file;

                  or ``PLPI'' for a <I>/proc/lpsinfo</I> file;

                  or ``PLST'' for a <I>/proc/lstatus</I> file;

                  or ``PLU'' for a <I>/proc/lusage</I> file;

                  or ``PLWG'' for a <I>/proc/gwindows</I> file;

                  or ``PLWI'' for a <I>/proc/lwpsinfo</I> file;

                  or ``PLWS'' for a <I>/proc/lwpstatus</I> file;

                  or ``PLWU'' for a <I>/proc/lwpusage</I> file;

                  or ``PLWX'' for a <I>/proc/xregs</I> file'

                  or ``PMAP'' for a <I>/proc</I> map file (<I>map</I>);

                  or ``PMEM'' for a <I>/proc</I> memory image file;

                  or ``PNTF'' for a <I>/proc</I> process notifier file;

                  or ``POBJ'' for a <I>/proc/object</I> file;

                  or ``PRMP'' for a <I>/proc/rmap</I> file;

                  or ``PRTD'' for a <I>/proc</I> root directory;

                  or ``PSGA'' for a <I>/proc/sigact</I> file;

                  or ``PSIN'' for a <I>/proc/psinfo</I> file;

                  or ``PSTA'' for a <I>/proc</I> status file;

                  or ``PUSG'' for a <I>/proc/usage</I> file;

                  or ``PW'' for a <I>/proc/watch</I> file;

                  or ``PXMP'' for a <I>/proc/xmap</I> file;

                  or ``REG'' for a regular file;

                  or ``SMT'' for a shared memory transport file;

                  or ``STSO'' for a stream socket;

                  or ``UNNM'' for an unnamed type file;

                  or ``XNAM'' for  an  OpenServer  Xenix  special
                  file of unknown type;

                  or  ``XSEM''  for an OpenServer Xenix semaphore
                  file;

                  or ``XSD'' for an OpenServer Xenix shared  data
                  file.

       FILE-ADDR  contains the kernel file structure address when
                  <B>f</B> has been specified to <B>+f</B>;

       FCT        contains the file reference count from the ker­
                  nel file structure when <B>c</B> has been specified to
                  <B>+f</B>;

       FILE-FLAG  when <B>g</B> or <B>G</B> has  been  specified  to  <B>+f</B>,  this
                  field  contains  the  contents of the f_flag[s]
                  member of the kernel  file  structure  and  the
                  kernel's per-process open file flags (if avail­
                  able); `G' causes them to be displayed in  hex­
                  adecimal;  `g',  as short-hand names; two lists
                  may be displayed with entries separated by com­
                  mas,  the lists separated by a semicolon (`;');
                  the first list may contain short-hand names for
                  f_flag[s] values from the following table:

                       AIO       asynchronous I/O (e.g., FAIO)
                       DLY       delay
                       DOCL      do clone
                       DSYN      data-only integrity
                       EX        open for exec
                       EXCL      exclusive open
                       FSYN      synchronous writes
                       GCDF      defer during unp_gc() (AIX)
                       GCMK      mark during unp_gc() (AIX)
                       GTTY      accessed via /dev/tty
                       HUP       HUP in progress
                       KERN      kernel
                       KIOC      kernel-issued ioctl
                       LCK       has lock
                       LG        large file
                       MBLK      stream message block
                       MK        mark
                       MNT       mount
                       MSYN      multiplex synchronization
                       NB        non-blocking I/O
                       NBDR      no BDRM check
                       NBIO      SYSV non-blocking I/O
                       NBF       n-buffering in effect
                       NC        no cache
                       ND        no delay
                       NDSY      no data synchronization
                       NET       network
                       NMFS      NM file system
                       NOTO      disable background stop
                       NSH       no share
                       NTTY      no controlling TTY
                       OLRM      OLR mirror
                       PAIO      POSIX asynchronous I/O
                       PP        POSIX pipe
                       R         read
                       RAIO      Reliant UNIX RAIO request
                       RC        file and record locking cache
                       REV       revoked
                       RSH       shared read
                       RSYN      read synchronization
                       SL        shared lock
                       SOCK      socket
                       SQSH      Sequent shared set on open
                       SQSV      Sequent SVM set on open
                       SQR       Sequent set repair on open
                       SQS1      Sequent full shared open
                       SQS2      Sequent partial shared open
                       STPI      stop I/O
                       SWR       synchronous read
                       SYN       file integrity while writing
                       TCPM      avoid TCP collision
                       TR        truncate
                       W         write

                  the  second list (after the semicolon) may con­
                  tain short-hand names  for  kernel  per-process
                  open file flags from this table:

                       ALLC      allocated
                       BR        the file has been read
                       BHUP      activity stopped by SIGHUP
                       BW        the file has been written
                       CLSG      closing
                       CX        close-on-exec (see fcntl(F_SETFD))
                       MP        memory-mapped
                       LCK       lock was applied
                       RSVW      reserved wait
                       SHMT      UF_FSHMAT set (AIX)
                       USE       in use (multi-threaded)

       NODE-ID    (or  INODE-ADDR  for  some dialects) contains a
                  unique identifier for the  file  node  (usually
                  the  kernel  vnode  or  inode address, but also
                  occasionally a concatenation of device and node
                  number) when <B>n</B> has been specified to <B>+f</B>;

       DEVICE     contains  the device numbers, separated by com­
                  mas, for a character  special,  block  special,
                  regular, directory or NFS file;

                  or  ``memory''  for  a  memory file system node
                  under DEC OSF/1, Digital UNIX, or Tru64 UNIX;

                  or the address of the private data  area  of  a
                  Solaris socket stream;

                  or  a  kernel reference address that identifies
                  the file (The kernel reference address  may  be
                  used for FIFO's, for example.);

                  or  the  base address or device name of a Linux
                  AX.25 socket device.

                  Usually only the lower thirty two bits  of  DEC
                  OSF/1,  Digital  UNIX,  or  Tru64  UNIX  kernel
                  addresses are displayed.

       SIZE, SIZE/OFF, or OFFSET
                  is the size of the file or the file  offset  in
                  bytes.   A  value  is  displayed in this column
                  only if it is available.  <I>Lsof</I>  displays  what­
                  ever  value  -  size or offset - is appropriate
                  for the type of the file  and  the  version  of
                  <I>lsof</I>.

                  On  some  UNIX dialects <I>lsof</I> can't obtain accu­
                  in hexadecimal with a leading ``0x'' if  it  is
                  longer than 8 digits.  (Consult the <B>-o</B> <I>o</I> option
                  description for information  on  when  8  might
                  default to some other value.)

                  Thus  the leading ``0t'' and ``0x'' identify an
                  offset when the column may contain both a  size
                  and an offset (i.e., its title is SIZE/OFF).

                  If the <B>-o</B> option is specified, <I>lsof</I> always dis­
                  plays the file offset (or nothing if no  offset
                  is  available)  and  labels  the column OFFSET.
                  The offset always begins with ``0t'' or  ``0x''
                  as described above.

                  The  <I>lsof</I>  user  can  control  the  switch from
                  ``0t'' to ``0x'' with the <B>-o</B> <I>o</I> option.  Consult
                  its description for more information.

                  If the <B>-s</B> option is specified, <I>lsof</I> always dis­
                  plays the file size (or nothing if no  size  is
                  available)  and labels the column SIZE.  The <B>-o</B>
                  and <B>-s</B> options  are  mutually  exclusive;  they
                  can't both be specified.

                  For  files that don't have a fixed size - e.g.,
                  don't reside on a disk device - <I>lsof</I> will  dis­
                  play  appropriate information about the current
                  size or position of the file if it is available
                  in  the kernel structures that define the file.

       NODE       is the node number of a local file;

                  or the inode number  of  an  NFS  file  in  the
                  server host;

                  or the Internet protocol type - e. g, ``TCP'';

                  or ``STR'' for a stream;

                  or ``CCITT'' for an HP-UX x.25 socket;

                  or  the  IRQ  or  inode number of a Linux AX.25
                  socket device.

       NAME       is the name of the mount point and file  system
                  on which the file resides;

                  or  the  name  of a file specified in the <I>names</I>
                  option (after  any  symbolic  links  have  been
                  resolved);

                  lowed  by  the amount of time elapsed since the
                  last packet was sent to  the  destination;  TCP
                  and  UDP  remote  addresses  may be followed by
                  TCP/TPI  information  in  parentheses  -  state
                  (e.g., ``(ESTABLISHED)'', ``(Unbound)''), queue
                  sizes, and window sizes (not all dialects) - in
                  a  fashion  similar to what <B>netstat(1)</B> reports;
                  see the <B>-T</B> option description or  the  descrip­
                  tion  of  the TCP/TPI field in <B>OUTPUT</B> <B>FOR</B> <B>OTHER</B>
                  <B>PROGRAMS</B> for more information on  state,  queue
                  size, and window size;

                  or the address or name of a UNIX domain socket,
                  possibly including a stream clone device  name,
                  a  file  system  object's  path name, local and
                  foreign kernel addresses, socket pair  informa­
                  tion, and a bound vnode address;

                  or the local and remote mount point names of an
                  NFS file;

                  or ``STR'', followed by the stream name;

                  or a stream character device name, followed  by
                  ``-&gt;'' and the stream name;

                  or  ``STR:''  followed  by  the  SCO OpenServer
                  stream device and module  names,  separated  by
                  ``-&gt;'';

                  or system directory name, `` -- '', and as many
                  components of the path name as <I>lsof</I> can find in
                  the  kernel's  name cache for selected dialects
                  (See the <B>KERNEL</B> <B>NAME</B>  <B>CACHE</B>  section  for  more
                  information.);

                  or  ``PIPE-&gt;'',  followed  by  a Solaris kernel
                  pipe destination address;

                  or ``COMMON:'', followed by  the  vnode  device
                  information  structure's  device  name,  for  a
                  Solaris common vnode;

                  or the address  family,  followed  by  a  slash
                  (`/'),  followed  by  fourteen  comma-separated
                  bytes of a non-Internet raw socket address;

                  or the HP-UX x.25 local  address,  followed  by
                  the  virtual  connection  number (if any), fol­
                  lowed by the remote address (if any);

                  or ``(dead)'' for disassociated DEC OSF/1, Dig­

                  or ``no PCB'' for socket files that do not have
                  a protocol block associated with them,  option­
                  ally  followed by ``, CANTSENDMORE'' if sending
                  on the socket has been disabled, or ``,  CANTR­
                  CVMORE''  if  receiving  on the socket has been
                  disabled (e.g., by the <B>shutdown(2)</B> function);

                  or the local and remote addresses  of  a  Linux
                  IPX     socket     file     in     the     form
                  &lt;net&gt;:[&lt;node&gt;:]&lt;port&gt;, followed in  parentheses
                  by  the  transmit  and receive queue sizes, and
                  the connection state;

                  or  ``dgram''  or  ``stream''  for   the   type
                  UnixWare  7.1.1 and above in-kernel UNIX domain
                  sockets, followed by  a  colon  (':')  and  the
                  local  path  name  when  available, followed by
                  ``-&gt;'' and  the  remote  path  name  or  kernel
                  socket address in hexadecimal when available.

       For dialects that support a ``namefs'' file system, allow­
       ing one file to be attached to another  with  <B>fattach(3C)</B>,
       <I>lsof</I>  will add ``(FA:&lt;address1&gt;&lt;direction&gt;&lt;address2&gt;)'' to
       the NAME column.  &lt;address1&gt; and &lt;address2&gt; are  hexadeci­
       mal  vnode  addresses.   &lt;direction&gt;  will  be  ``&lt;-''  if
       &lt;address2&gt; has been fattach'ed to this vnode whose address
       is &lt;address1&gt;; and ``-&gt;'' if &lt;address1&gt;, the vnode address
       of  this  vnode,  has  been  fattach'ed   to   &lt;address2&gt;.
       &lt;address1&gt;  may  be  omitted  if it already appears in the
       DEVICE column.


</PRE>
<H2>LOCKS</H2><PRE>
       <I>Lsof</I> can't adequately report  the  wide  variety  of  UNIX
       dialect file locks in a single character.  What it reports
       in a single character is a compromise between the informa­
       tion  it  finds  in  the kernel and the limitations of the
       reporting format.

       Moreover, when a process holds several byte level locks on
       a  file, <I>lsof</I> only reports the status of the first lock it
       encounters.  If it is a byte level  lock,  then  the  lock
       character will be reported in lower case - i.e., `r', `w',
       or `x' - rather than the upper  case  equivalent  reported
       for a full file lock.

       Generally <I>lsof</I> can only report on locks held by local pro­
       cesses on local files.  When a local process sets  a  lock
       on  a remotely mounted (e.g., NFS) file, the remote server
       host usually records the lock  state.   One  exception  is
       Solaris - at some patch levels of 2.3, and in all versions
       above 2.4,  the  Solaris  kernel  records  information  on
       (012) (or a NUL (000) if the  0  (zero)  field  identifier
       character  is  specified.)   The data of the field follows
       immediately after the field identification  character  and
       extends to the field terminator.

       It  is  possible  to  think of field output as process and
       file sets.  A process set begins with a field whose  iden­
       tifier  is `p' (for process IDentifier (PID)).  It extends
       to the beginning of the next PID field or the beginning of
       the  first file set of the process, whichever comes first.
       Included in the process set are fields that  identify  the
       command,  the  process group IDentification (PGID) number,
       and the user ID (UID) number or login name.

       A file set begins with a field  whose  identifier  is  `f'
       (for  file  descriptor).   It  is  followed  by lines that
       describe the file's access mode, lock state, type, device,
       size,  offset,  inode,  protocol,  name  and stream module
       names.  It extends to the beginning of the  next  file  or
       process set, whichever comes first.

       When the NUL (000) field terminator has been selected with
       the 0 (zero) field identifier character,  <I>lsof</I>  ends  each
       process and file set with a NL (012) character.

       <I>Lsof</I>  always produces one field, the PID (`p') field.  All
       other fields may be declared optionally in the field iden­
       tifier  character list that follows the <B>-F</B> option.  When a
       field selection character identifies an item <I>lsof</I> does not
       normally  list - e.g., PPID, selected with <B>-R</B> - specifica­
       tion of the field character - e.g., ``<B>-FR</B>'' - also selects
       the listing of the item.

       It  is  entirely  possible  to select a set of fields that
       cannot easily be parsed - e.g., if  the  field  descriptor
       field  is  not  selected,  it may be difficult to identify
       file sets.  To help you avoid this difficulty,  <I>lsof</I>  sup­
       ports  the  <B>-F</B> option; it selects the output of all fields
       with NL terminators (the <B>-F0</B> option pair selects the  out­
       put  of all fields with NUL terminators).  For compatibil­
       ity reasons neither <B>-F</B>  nor  <B>-F0</B>  select  the  raw  device
       field.

       These  are  the fields that <I>lsof</I> will produce.  The single
       character listed first is the field identifier.

            a    file access mode
            c    process command name (all characters from proc or
                 user structure)
            C    file structure share count
            d    file's device character code
            D    file's major/minor device number (0x&lt;hexadecimal&gt;)
            R    parent process ID
            s    file's size (decimal)
            S    file's stream identification
            t    file's type
            T    TCP/TPI information, identified by prefixes (the
                 `=' is part of the prefix):
                     ST=&lt;state&gt;
                     QR=&lt;read queue size&gt;
                     QS=&lt;write queue size&gt;
                     WR=&lt;window read size&gt;  (not all dialects)
                     WW=&lt;window write size&gt;  (not all dialects)
                 (TPI state information and window sizes aren't
                   reported for all supported UNIX dialects. The
                   <B>-h</B> or <B>-?</B> help output for the <B>-T</B> option will
                   show whether window size reporting can be
                   requested.)
            u    process user ID
            0    use NUL field terminator character in place of NL
            1-9  dialect-specific field identifiers (The output
                 of <B>-F?</B> identifies the information to be found
                 in dialect-specific fields.)

       You can get on-line help information on  these  characters
       and their descriptions by specifying the <B>-F?</B>  option pair.
       (Escape the `?' character as your shell requires.)   Addi­
       tional  information  on  field content can be found in the
       <B>OUTPUT</B> section.

       As an example, ``<B>-F</B> <B>pcfn</B>''  will  select  the  process  ID
       (`p'),  command name (`c'), file descriptor (`f') and file
       name (`n') fields with an NL field  terminator  character;
       ``<B>-F</B>  <B>pcfn0</B>''  selects  the  same  output with a NUL (000)
       field terminator character.

       <I>Lsof</I> doesn't produce all fields for every process or  file
       set, only those that are available.  Some fields are mutu­
       ally  exclusive:   file   device   characters   and   file
       major/minor device numbers; file inode number and protocol
       name; file name and stream identification; file  size  and
       offset.   One or the other member of these mutually exclu­
       sive sets will appear in field output, but not both.

       Normally <I>lsof</I> ends each field with a NL  (012)  character.
       The  0  (zero) field identifier character may be specified
       to change the field terminator character to a  NUL  (000).
       A  NUL terminator may be easier to process with <I>xargs</I> <I>(1),</I>
       for example, or with programs whose quoting mechanisms may
       not  easily cope with the range of characters in the field
       output.  When the NUL field terminator  is  in  use,  <I>lsof</I>
       ends each process and file set with a NL (012).

       Three  aids  to  producing  programs that can process <I>lsof</I>
       put to  validate  the  correct  operation  of  <I>lsof</I>.   The
       library can be found in the <I>tests/LTlib.c</I> file of the <I>lsof</I>
       distribution.   The  library  uses  the  first  aid,   the
       <I>lsof</I><B>_</B><I>fields.h</I> header file.


</PRE>
<H2>BLOCKS AND TIMEOUTS</H2><PRE>
       <I>Lsof</I>  can be blocked by some kernel functions that it uses
       - <B>lstat(2)</B>, <B>readlink(2)</B>, and <B>stat(2)</B>.  These functions are
       stalled  in  the kernel, for example, when the hosts where
       mounted NFS file systems reside become inaccessible.

       <I>Lsof</I> attempts to break these blocks with timers and  child
       processes,  but  the  techniques  are not wholly reliable.
       When <I>lsof</I> does manage to break a block, it will report the
       break  with  an  error  message.  The messages may be sup­
       pressed with the <B>-t</B> and <B>-w</B> options.

       The default timeout value may be displayed with the <B>-h</B>  or
       <B>-?</B>   option, and it may be changed with the <B>-S</B> <I>[t]</I> option.
       The minimum for <I>t</I> is two seconds,  but  you  should  avoid
       small  values,  since slow system responsiveness can cause
       short timeouts to expire  unexpectedly  and  perhaps  stop
       <I>lsof</I> before it can produce any output.

       When  <I>lsof</I>  has  to  break  a  block  during its access of
       mounted file system information,  it  normally  continues,
       although  with less information available to display about
       open files.

       <I>Lsof</I> can also be  directed  to  avoid  the  protection  of
       timers and child processes when using the kernel functions
       that might block by specifying the <B>-O</B> option.  While  this
       will allow <I>lsof</I> to start up with less overhead, it exposes
       <I>lsof</I> completely to the kernel situations that might  block
       it.  Use this option cautiously.


</PRE>
<H2>AVOIDING KERNEL BLOCKS</H2><PRE>
       You can use the <B>-b</B> option to tell <I>lsof</I> to avoid using ker­
       nel functions that would block.  Some cautions apply.

       First, using this option usually requires that your system
       supply  alternate  device  numbers  in place of the device
       numbers that <I>lsof</I> would normally obtain with the  <B>lstat(2)</B>
       and  <B>stat(2)</B>  kernel  functions.  See the <B>ALTERNATE</B> <B>DEVICE</B>
       <B>NUMBERS</B> section for more information on  alternate  device
       numbers.

       Second,  you can't specify <I>names</I> for <I>lsof</I> to locate unless
       they're file system names.  This is because <I>lsof</I> needs  to
       know  the  device  and  inode numbers of files listed with
       <I>names</I> in the <I>lsof</I> options, and the <B>-b</B> option prevents <I>lsof</I>
       from obtaining them.  Moreover, since <I>lsof</I> only has device
       the <B>-b</B> option directs it to avoid.  You can suppress these
       messages  by  specifying the <B>-w</B> option, but if you do, you
       won't see the alternate device  numbers  reported  in  the
       warning messages.


</PRE>
<H2>ALTERNATE DEVICE NUMBERS</H2><PRE>
       On  some  dialects, when <I>lsof</I> has to break a block because
       it can't get information about a mounted file  system  via
       the  <B>lstat(2)</B> and <B>stat(2)</B> kernel functions, or because you
       specified the <B>-b</B> option,  <I>lsof</I>  can  obtain  some  of  the
       information  it needs - the device number and possibly the
       file system type - from the system mount table.  When that
       is  possible,  <I>lsof</I>  will  report  the  device  number  it
       obtained.  (You can suppress the report by specifying  the
       <B>-w</B> option.)

       You  can  assist  this process if your mount table is sup­
       ported with an <I>/etc/mtab</I> or <I>/etc/mnttab</I> file that contains
       an  options field by adding a ``dev=xxxx'' field for mount
       points that do not have one in their options strings.

       The ``xxxx'' portion of the field is the hexadecimal value
       of  the  file system's device number.  (Consult the <I>st</I><B>_</B><I>dev</I>
       field of the output of the <B>lstat(2)</B> and <B>stat(2)</B>  functions
       for the appropriate values for your file systems.)  Here's
       an example from a Sun Solaris 2.6 <I>/etc/mnttab</I> for  a  file
       system remotely mounted via NFS:

            nfs  ignore,noquota,dev=2a40001

       There's  an  advantage  to  having ``dev=xxxx'' entries in
       your mount table file, especially for  file  systems  that
       are mounted from remote NFS servers.  When a remote server
       crashes and you want to identify its users by running <I>lsof</I>
       on  one of its clients, <I>lsof</I> probably won't be able to get
       output from the <B>lstat(2)</B> and  <B>stat(2)</B>  functions  for  the
       file  system.   If  it can obtain the file system's device
       number from the mount table, it will be  able  to  display
       the files open on the crashed NFS server.

       Some  dialects  that  do  not  use  an  ASCII <I>/etc/mtab</I> or
       <I>/etc/mnttab</I> file for the mount table may still provide  an
       alternative  device number in their internal mount tables.
       This includes AIX, Apple Darwin, DEC OSF/1, Digital  UNIX,
       FreeBSD,  NetBSD, OpenBSD, and Tru64 UNIX.  <I>Lsof</I> knows how
       to obtain the alternative device number for these dialects
       and  uses  it  when its attempt to <B>lstat(2)</B> or <B>stat(2)</B> the
       file system is blocked.

       If you're not sure your dialect supplies alternate  device
       numbers  for  file  systems from its mount table, use this
       <I>lsof</I> incantation to see if it reports any alternate device
       file  system  path  lookups  don't  use  the kernel's name
       cache.)

       <I>Lsof</I> reports the complete paths it finds in the NAME  col­
       umn.   If  <I>lsof</I>  can't report all components in a path, it
       reports in the NAME column the file system name,  followed
       by  a  space,  two  `-' characters, another space, and the
       name components it has located, separated by the `/' char­
       acter.

       When <I>lsof</I> is run in repeat mode - i.e., with the <B>-r</B> option
       specified - the extent to which it can  report  path  name
       components for the same file may vary from cycle to cycle.
       That's because other running processes can cause the  ker­
       nel to remove entries from its name cache and replace them
       with others.

       <I>Lsof's</I> use of the kernel name cache to identify the  paths
       of  files can lead it to report incorrect components under
       some circumstances.  This can happen when the kernel  name
       cache  uses  device  and node number as a key (e.g., Linux
       and SCO OpenServer) and a key on a rapidly  changing  file
       system  is  reused.   If the UNIX dialect's kernel doesn't
       purge the name cache entry for a file when it is unlinked,
       <I>lsof</I> may find a reference to the wrong entry in the cache.
       The <I>lsof</I> FAQ (The <B>FAQ</B> section gives  its  location.)   has
       more information on this situation.

       <I>Lsof</I> can report path name components for these dialects:

            BSDI BSD/OS
            DC/OSx
            DEC OSF/1, Digital UNIX, Tru64 UNIX
            FreeBSD
            HP-UX
            Linux
            NetBSD
            NEXTSTEP
            OpenBSD
            Reliant UNIX
            Caldera OpenUNIX
            SCO OpenServer
            SCO|Caldera UnixWare
            Solaris

       <I>Lsof</I> can't report path name components for these dialects:

            AIX

       If you want to know why <I>lsof</I> can't report path name compo­
       nents for some dialects, see the <I>lsof</I> FAQ (The <B>FAQ</B> section
       gives its location.)
            Path from the <B>-D</B> option;
            Path from an environment variable;
            System-wide path;
            Personal path (the default);
            Personal path, modified by an environment variable.

       Consult the output of the <B>-h</B>, <B>-D?</B> <B>,</B> or  <B>-?</B>   help  options
       for  the  current state of device cache support.  The help
       output lists the default read-mode device cache file  path
       that is in effect for the current invocation of <I>lsof</I>.  The
       <B>-D?</B>  option output lists the read-only  and  write  device
       cache  file paths, the names of any applicable environment
       variables, and the personal device cache path format.

       <I>Lsof</I> can detect that the current  device  cache  file  has
       been  accidentally  or  maliciously  modified by integrity
       checks, including the computation and  verification  of  a
       sixteen  bit  Cyclic  Redundancy  Check  (CRC)  sum on the
       file's contents.  When <I>lsof</I> senses  something  wrong  with
       the  file,  it issues a warning and attempts to remove the
       current cache file and create a new copy, but  only  to  a
       path that the process can legitimately write.

       The  path  from which a <I>lsof</I> process may attempt to read a
       device cache file may not be the same as the path to which
       it  can legitimately write.  Thus when <I>lsof</I> senses that it
       needs to update the device cache file,  it  may  choose  a
       different  path for writing it from the path from which it
       read an incorrect or outdated version.

       If available, the <B>-Dr</B> option will inhibit the writing of a
       new device cache file.  (It's always available when speci­
       fied without a path name argument.)

       When a new device is added to the system, the device cache
       file  may  need  to be recreated.  Since <I>lsof</I> compares the
       mtime of the device cache file with the mtime and ctime of
       the  <I>/dev</I> (or <I>/devices</I>) directory, it usually detects that
       a new device has been added; in that case  <I>lsof</I>  issues  a
       warning  message  and attempts to rebuild the device cache
       file.

       Whenever <I>lsof</I> writes a device cache file, it sets its own­
       ership  to  the real UID of the executing process, and its
       permission modes to 0600, this restricting its reading and
       writing to the file's owner.


</PRE>
<H2>LSOF PERMISSIONS THAT AFFECT DEVICE CACHE FILE ACCESS</H2><PRE>
       Two  permissions of the <I>lsof</I> executable affect its ability
       to access device cache files.  The permissions are set  by
       the local system administrator when <I>lsof</I> is installed.


       An <I>lsof</I> process that has setgid permission usually surren­
       ders the permission after it has accessed the kernel  mem­
       ory  devices.  When it does that, <I>lsof</I> can allow more lib­
       eral device cache path formations.  The <I>lsof</I>  distribution
       recommends that versions for these dialects run setgid and
       be allowed to surrender setgid permission.

            AIX 4.3.[23], 5L, and 5.1
            Apple Darwin 1.[2-5], 5.x and 6.x for Power Macintosh systems
            BSDI BSD/OS 4.[13] for x86-based systems
            DEC OSF/1, Digital UNIX, Tru64 UNIX 4.0, and 5.[01]
            FreeBSD 4.[234567] and 5.0 for x86-based systems
            FreeBSD 5.0 for Alpha and Sparc64 based systems
            HP-UX 11.00
            NetBSD 1.[456] for Alpha, x86, and SPARC-based systems
            NEXTSTEP 3.[13] for NEXTSTEP architectures
            OpenBSD 2.[89] and 3.[012] for x86-based systems
            OpenStep 4.x
            Caldera OpenUNIX 8
            SCO OpenServer Release 5.0.[46] for x86-based systems
            SCO|Caldera UnixWare 7.1.[13] for x86-based systems
            Solaris 2.6, 7, 8, and 9

       (Note: <I>lsof</I> for AIX 5L and above needs setuid-root permis­
       sion if its <B>-X</B> option is used.)

       <I>Lsof</I>  for  these dialects does not support a device cache,
       so the permissions given to the executable don't apply  to
       the device cache file.

            Linux 2.1.72 and above (/proc-based <I>lsof</I>)


</PRE>
<H2>DEVICE CACHE FILE PATH FROM THE -D OPTION</H2><PRE>
       The  <B>-D</B>  option  provides limited means for specifying the
       device cache file path.  Its <B>?</B>  function will  report  the
       read-only and write device cache file paths that <I>lsof</I> will
       use.

       When the <B>-D</B> <B>b</B>, <B>r</B>, and <B>u</B> functions are available,  you  can
       use them to request that the cache file be built in a spe­
       cific location (<B>b</B>[<I>path</I>]); read but not rebuilt  (<B>r</B>[<I>path</I>]);
       or  read and rebuilt (<B>u</B>[<I>path</I>]).  The <B>b</B>, <B>r</B>, and <B>u</B> functions
       are restricted under some conditions.  They are restricted
       when  the <I>lsof</I> process is setuid-root.  The path specified
       with the <B>r</B> function is always read-only, even when  it  is
       available.

       The  <B>b</B>,  <B>r</B>,  and  <B>u</B> functions are also restricted when the
       <I>lsof</I> process runs setgid and <I>lsof</I>  doesn't  surrender  the
       setgid  permission.  (See the <B>LSOF</B> <B>PERMISSIONS</B> <B>THAT</B> <B>AFFECT</B>
       <B>DEVICE</B> <B>CACHE</B> <B>FILE</B> <B>ACCESS</B> section for a list of implementa­
       without  a  path  name  argument.   If <I>lsof</I> is not running
       setuid-root and surrenders its setgid permission,  a  path
       name argument may accompany the <B>r</B> function.

       When  available,  the  <B>u</B> function tells <I>lsof</I> to attempt to
       read and use the device cache file.  If it can't read  the
       file, or if it finds the contents of the file incorrect or
       outdated, it will read information from  the  kernel,  and
       attempt  to  write  an updated version of the device cache
       file, but only to a path it considers legitimate  for  the
       <I>lsof</I> process effective and real UIDs.


</PRE>
<H2>DEVICE CACHE PATH FROM AN ENVIRONMENT VARIABLE</H2><PRE>
       <I>Lsof's</I> second choice for the device cache file is the con­
       tents of the LSOFDEVCACHE environment variable.  It avoids
       this  choice  if  the  <I>lsof</I> process is setuid-root, or the
       real UID of the process is root.

       A further restriction applies to a device cache file  path
       taken  from  the  LSOFDEVCACHE  environment variable: <I>lsof</I>
       will not write a device cache file to the path if the <I>lsof</I>
       process doesn't surrender its setgid permission.  (See the
       <B>LSOF</B> <B>PERMISSIONS</B> <B>THAT</B> <B>AFFECT</B> <B>DEVICE</B> <B>CACHE</B> <B>FILE</B> <B>ACCESS</B> sec­
       tion for information on implementations that don't surren­
       der their setgid permission.)

       The local system administrator can disable the use of  the
       LSOFDEVCACHE  environment variable or change its name when
       building <I>lsof</I>.  Consult the output of <B>-D?</B>  for  the  envi­
       ronment variable's name.


</PRE>
<H2>SYSTEM-WIDE DEVICE CACHE PATH</H2><PRE>
       The  local  system administrator may choose to have a sys­
       tem-wide device cache file when building <I>lsof</I>.  That  file
       will generally be constructed by a special system adminis­
       tration procedure when the system is booted  or  when  the
       contents  of <I>/dev</I> or <I>/devices</I>) changes.  If defined, it is
       <I>lsof's</I> third device cache file path choice.

       You can tell that a system-wide device cache  file  is  in
       effect  for  your local installation by examining the <I>lsof</I>
       help option output - i.e., the output from the  <B>-h</B>  or  <B>-?</B>
       option.

       <I>Lsof</I> will never write to the system-wide device cache file
       path by default.  It must be explicitly named  with  a  <B>-D</B>
       function  in  a  root-owned  procedure.  Once the file has
       been written, the procedure  must  change  its  permission
       modes to 0644 (owner-read and owner-write, group-read, and
       other-read).


</PRE>
<H2>PERSONAL DEVICE CACHE PATH (DEFAULT)</H2><PRE>
       base name is defined to be the  characters  preceding  the
       first  `.'  in the <B>gethostname(2)</B> output, or all the <I>geth­</I>
       <B>ostname(2)</B> output if it contains no `.'.

       The device cache file belongs to the user ID and is  read­
       able  and  writable by the user ID alone - i.e., its modes
       are 0600.  Each distinct real user ID on a given host that
       executes <I>lsof</I> has a distinct device cache file.  The <I>host­</I>
       <I>name</I> part of the path distinguishes device cache files  in
       an  NFS-mounted  home  directory  into  which device cache
       files are written from several different hosts.

       The personal device cache file path formed by this  method
       represents  a  device cache file that <I>lsof</I> will attempt to
       read, and will attempt to write should  it  not  exist  or
       should its contents be incorrect or outdated.

       The  <B>-Dr</B>  option without a path name argument will inhibit
       the writing of a new device cache file.

       The <B>-D?</B>  option will list  the  format  specification  for
       constructing  the personal device cache file.  The conver­
       sions used in the format specification  are  described  in
       the <I>00DCACHE</I> file of the <I>lsof</I> distribution.


</PRE>
<H2>MODIFIED PERSONAL DEVICE CACHE PATH</H2><PRE>
       If  this option is defined by the local system administra­
       tor when <I>lsof</I> is  built,  the  LSOFPERSDCPATH  environment
       variable  contents  may  be used to add a component of the
       personal device cache file path.

       The LSOFPERSDCPATH variable contents are inserted  in  the
       path at the place marked by the local system administrator
       with the ``%p'' conversion in the HASPERSDC format  speci­
       fication  of  the  dialect's <I>machine.h</I> header file.  (It's
       placed right after the home directory in the default  <I>lsof</I>
       distribution.)

       Thus,  for  example,  if LSOFPERSDCPATH contains ``LSOF'',
       the home directory is ``/Homes/abe'',  the  host  name  is
       ``vic.cc.purdue.edu'',  and  the  HASPERSDC  format is the
       default (``%h/%p.lsof_%L''), the modified personal  device
       cache file path is:

            /Homes/abe/LSOF/.lsof_vic

       The  LSOFPERSDCPATH  environment  variable is ignored when
       the <I>lsof</I> process is setuid-root or when the  real  UID  of
       the process is root.

       <I>Lsof</I>  will  not  write to a modified personal device cache
       file path if the <I>lsof</I>  process  doesn't  surrender  setgid
       variable from LSOFPERSDCPATH to something else; change the
       HASPERSDC format to include the personal path component in
       another  place;  or  exclude  the  personal path component
       entirely.  Consult the output of the <B>-D?</B>  option  for  the
       environment variable's name and the HASPERSDC format spec­
       ification.


</PRE>
<H2>DIAGNOSTICS</H2><PRE>
       Errors are identified with messages on the standard  error
       file.

       <I>Lsof</I>  returns a one (1) if any error was detected, includ­
       ing the failure  to  locate  command  names,  file  names,
       Internet addresses or files, login names, NFS files, PIDs,
       PGIDs, or UIDs it was asked to list.  If the <B>-V</B> option  is
       specified,  <I>lsof</I>  will indicate the search items it failed
       to list.

       It returns a zero (0) if no errors were detected and if it
       was  able to list some information about all the specified
       search arguments.


       When <I>lsof</I> cannot open access to <I>/dev</I> (or <I>/devices</I>) or  one
       of  its  subdirectories,  or  get information on a file in
       them with <B>stat(2)</B>, it issues a warning message and contin­
       ues.  That <I>lsof</I> will issue warning messages about inacces­
       sible files in <I>/dev</I> (or <I>/devices</I>) is indicated in its help
       output  -  requested with the <B>-h</B> or &gt;B -?  options -  with
       the message:

            Inaccessible /dev warnings are enabled.

       The warning message may be suppressed with the <B>-w</B>  option.
       It may also have been suppressed by the system administra­
       tor when <I>lsof</I> was compiled by the setting of  the  WARNDE­
       VACCESS  definition.   In  this  case, the output from the
       help options will include the message:

            Inaccessible /dev warnings are disabled.

       Inaccessible device  warning  messages  usually  disappear
       after <I>lsof</I> has created a working device cache file.


</PRE>
<H2>EXAMPLES</H2><PRE>
       For  a  more  extensive  set  of examples, documented more
       fully, see the <I>00QUICKSTART</I> file of the <I>lsof</I> distribution.

       To list all open files, use:

              lsof


       To list all files using any protocol on ports 513, 514, or
       515 of host wonderland.cc.purdue.edu, use:

              lsof -i @wonderland.cc.purdue.edu:513-515

       To  list  all  files  using  any  protocol  on any port of
       mace.cc.purdue.edu (cc.purdue.edu is the default  domain),
       use:

              lsof -i @mace

       To  list all open files for login name ``abe'', or user ID
       1234, or process 456, or process 123, or process 789, use:

              lsof -p 456,123,789 -u 1234,abe

       To list all open files on device /dev/hd4, use:

              lsof /dev/hd4

       To find the process that has /u/abe/foo open, use:

              lsof /u/abe/foo

       To  send  a  SIGHUP  to the processes that have /u/abe/bar
       open, use:

              kill -HUP `lsof -t /u/abe/bar`

       To find any open  file,  including  an  open  UNIX  domain
       socket file, with the name <I>/dev/log</I>, use:

              lsof /dev/log

       To  find  processes with open files on the NFS file system
       named <I>/nfs/mount/point</I> whose server is  inaccessible,  and
       presuming  your mount table supplies the device number for
       <I>/nfs/mount/point</I>, use:

              lsof -b /nfs/mount/point

       To do the preceding  search  with  warning  messages  sup­
       pressed, use:

              lsof -bw /nfs/mount/point

       To ignore the device cache file, use:

              lsof -Di

       To  obtain PID and command name field output for each pro­
       form of the <B>-c</B> <I>c</I> option:

              lsof -c /^..o.$/i -a -d cwd

       To find an IP version 4  socket  file  by  its  associated
       numeric dot-form address, use:

              lsof -i@128.210.15.17

       To find an IP version 6 socket file (when the UNIX dialect
       supports  IPv6)  by  its  associated  numeric   colon-form
       address, use:

              lsof -i@[0:1:2:3:4:5:6:7]

       To find an IP version 6 socket file (when the UNIX dialect
       supports IPv6) by an associated numeric colon-form address
       that  has  a  run  of  zeroes  in it - e.g., the loop-back
       address - use:

              lsof -i@[::1]


</PRE>
<H2>BUGS</H2><PRE>
       Since <I>lsof</I> reads kernel memory  in  its  search  for  open
       files,  rapid  changes in kernel memory may produce unpre­
       dictable results.

       When a file has multiple record  locks,  the  lock  status
       character  (following the file descriptor) is derived from
       a test of the first lock structure, not from any  combina­
       tion   of  the  individual  record  locks  that  might  be
       described by multiple lock structures.

       <I>Lsof</I> can't search for files with restrictive  access  per­
       missions  by <I>name</I> unless it is installed with root set-UID
       permission.  Otherwise it  is  limited  to  searching  for
       files  to which its user or its set-GID group (if any) has
       access permission.

       The display of the destination address  of  a  raw  socket
       (e.g.,  for  <I>ping</I>)  depends  on the UNIX operating system.
       Some dialects store the destination  address  in  the  raw
       socket's protocol control block, some do not.

       <I>Lsof</I>  can't always represent Solaris device numbers in the
       same way that <B>ls(1)</B> does.   For  example,  the  major  and
       minor  device  numbers that the <B>lstat(2)</B> and <B>stat(2)</B> func­
       tions report for the directory on which CD-ROM  files  are
       mounted  (typically  <I>/cdrom</I>)  are not the same as the ones
       that it reports for the device on which CD-ROM  files  are
       mounted (typically <I>/dev/sr0</I>).  (<I>Lsof</I> reports the directory
       numbers.)
       descriptors are labeled <B>mem</B> descriptors.

       <I>Lsof</I>  can't  search for DEC OSF/1, Digital UNIX, and Tru64
       UNIX named pipes by name, because their kernel implementa­
       tion  of  <B>lstat(2)</B> returns an improper device number for a
       named pipe.

       <I>Lsof</I> can't report fully or correctly on HP-UX 9.01, 10.20,
       and  11.00  locks because of insufficient access to kernel
       data or errors in the kernel data.  See the <I>lsof</I> FAQ  (The
       <B>FAQ</B> section gives its location.)  for details.

       The  AIX SMT file type is a fabrication.  It's made up for
       file structures whose type (15) isn't defined in  the  AIX
       <I>/usr/include/sys/file.h</I>  header  file.   One way to create
       such file structures is to run X clients with the  DISPLAY
       variable set to ``:0.0''.

       The  <B>+|-f</B><I>[cfgGn]</I> option is not supported under /proc-based
       Linux <I>lsof</I>, because it doesn't read kernel structures from
       kernel memory.


</PRE>
<H2>ENVIRONMENT</H2><PRE>
       <I>Lsof</I> may access these environment variables.

       LSOFDEVCACHE      defines the path to a device cache file.
                         See the <B>DEVICE</B> <B>CACHE</B> <B>PATH</B> <B>FROM</B> <B>AN</B>  <B>ENVI­</B>
                         <B>RONMENT</B> <B>VARIABLE</B> section for more infor­
                         mation.

       LSOFPERSDCPATH    defines the middle component of a  modi­
                         fied  personal  device  cache file path.
                         See the <B>MODIFIED</B> <B>PERSONAL</B>  <B>DEVICE</B>  <B>CACHE</B>
                         <B>PATH</B> section for more information.


</PRE>
<H2>FAQ</H2><PRE>
       Frequently-asked  questions and their answers (an FAQ) are
       available in the <I>00FAQ</I> file of the <I>lsof</I> distribution.

       That  file  is  also  available  via  anonymous  ftp  from
       <I>vic.cc.purdue.edu</I> at <I>pub/tools/unix/lsof</I>FAQ<I>.</I>  The URL is:

              ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/FAQ


</PRE>
<H2>FILES</H2><PRE>
       <I>/dev/kmem</I>         kernel virtual memory device

       <I>/dev/mem</I>          physical memory device

       <I>/dev/swap</I>         system paging device

       <I>.lsof</I><B>_</B><I>hostname</I>    <I>lsof's</I>  device  cache  file (The suffix,
       You can also use this URL:

              ftp://vic.cc.purdue.edu/pub/tools/unix/lsof

       <I>Lsof</I>   is   also  mirrored  elsewhere.   When  you  access
       <I>vic.cc.purdue.edu</I> and change  to  its  <I>pub/tools/unix/lsof</I>
       directory,  you'll  be  given a list of some mirror sites.
       The <I>pub/tools/unix/lsof</I> directory  also  contains  a  more
       complete  list in its <I>mirrors</I> file.  Use mirrors with cau­
       tion - not all mirrors always have the latest  <I>lsof</I>  revi­
       sion.

       Some   pre-compiled  <I>Lsof</I>  executables  are  available  on
       <I>vic.cc.purdue.edu</I>, but their use  is  discouraged  -  it's
       better  that  you build your own from the sources.  If you
       feel you must use a pre-compiled executable,  please  read
       the  cautions  that  appear  in  the  README  files of the
       <I>pub/tools/unix/lsof/binaries</I> subdirectories and in the 00*
       files of the distribution.

       More  information on the <I>lsof</I> distribution can be found in
       its <I>README.lsof</I><B>_</B><I>&lt;version&gt;</I> file.  If you intend to get  the
       <I>lsof</I>    distribution    and    build   it,   please   read
       <I>README.lsof</I><B>_</B><I>&lt;version&gt;</I> and the other 00* files of the  dis­
       tribution before sending questions to the author.


</PRE>
<H2>SEE ALSO</H2><PRE>
       <I>Lsof</I>  versions  2  and 3 have been tested under older UNIX
       dialects.  They  are  available  via  anonymous  ftp  from
       <I>vic.cc.purdue.edu</I>  in  the  <I>pub/tools/unix/lsof/OLD</I> direc­
       tory.

       <B>access(2)</B>, <B>awk(1)</B>, <B>crash(1)</B>, <B>fattach(3C)</B>, <B>ff(1)</B>, <B>fstat(8)</B>,
       <B>fuser(1)</B>,  <B>gethostname(2)</B>,  <B>isprint(3)</B>, <B>kill(1)</B>, <B>lstat(2)</B>,
       <B>modload(8)</B>,  <B>mount(8)</B>,  <B>netstat(1)</B>,  <B>ofiles(8L)</B>,  <B>perl(1)</B>,
       <B>ps(1)</B>, <B>readlink(2)</B>, <B>stat(2)</B>, <B>uname(1)</B>.



                          Revision-4.66                   <B>LSOF(8)</B>
</PRE>
<HR>
<ADDRESS>
Man(1) output converted with
<a href="http://www.oac.uci.edu/indiv/ehood/man2html.html">man2html</a>
</ADDRESS>
</BODY>
</HTML>
